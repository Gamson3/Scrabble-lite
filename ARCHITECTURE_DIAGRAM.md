# ğŸ—ï¸ Architecture Diagram - Circle Word Game

## Full System Architecture (For Slide/Print)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           CLIENT LAYER                                    â•‘
â•‘                                                                           â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘   â”‚  CLI CLIENT     â”‚   â”‚  WEB CLIENT     â”‚   â”‚ MOBILE CLIENT   â”‚      â•‘
â•‘   â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚      â•‘
â•‘   â”‚  Node.js        â”‚   â”‚  React 18       â”‚   â”‚  Capacitor      â”‚      â•‘
â•‘   â”‚  TypeScript     â”‚   â”‚  Vite           â”‚   â”‚  + React        â”‚      â•‘
â•‘   â”‚  readline-sync  â”‚   â”‚  Tailwind CSS   â”‚   â”‚  iOS/Android    â”‚      â•‘
â•‘   â”‚  chalk          â”‚   â”‚                 â”‚   â”‚                 â”‚      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘            â”‚                     â”‚                      â”‚                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             â”‚                     â”‚                      â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    WebSocket (ws://localhost:3004)
                    JSON Message Protocol
                                   â”‚
                                   â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        ROOM SERVICE (API GATEWAY)                         â•‘
â•‘                            Port: 3004                                     â•‘
â•‘                                                                           â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚  â€¢ WebSocket Server (Real-time bidirectional communication)     â”‚   â•‘
â•‘   â”‚  â€¢ Room Management (Create, join, leave rooms)                  â”‚   â•‘
â•‘   â”‚  â€¢ Message Broadcasting (Send to all players in room)           â”‚   â•‘
â•‘   â”‚  â€¢ Player Connection Management                                 â”‚   â•‘
â•‘   â”‚  â€¢ Authentication Gateway                                       â”‚   â•‘
â•‘   â”‚  â€¢ Game State Synchronization                                   â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             â”‚                     â”‚                      â”‚
        HTTP â”‚                HTTP â”‚                 HTTP â”‚
             â”‚                     â”‚                      â”‚
             â–¼                     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER SERVICE    â”‚   â”‚  GAME RULES SERVICE  â”‚   â”‚ DICTIONARY       â”‚
â”‚  Port: 3001      â”‚   â”‚  Port: 3003          â”‚   â”‚ SERVICE          â”‚
â”‚                  â”‚   â”‚                      â”‚   â”‚ Port: 3002       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Registration  â”‚ â”‚   â”‚ â”‚Circle Letter Gen â”‚â”‚   â”‚ â”‚Word          â”‚ â”‚
â”‚ â”‚              â”‚ â”‚   â”‚ â”‚                  â”‚â”œâ”€â”€â”€â”¼â”€â–¶â”‚Validation    â”‚ â”‚
â”‚ â”‚Login/Auth    â”‚ â”‚   â”‚ â”‚Word Formation    â”‚â—€â”€â”€â”€â”¼â”€â”¤              â”‚ â”‚
â”‚ â”‚              â”‚ â”‚   â”‚ â”‚Validation        â”‚â”‚   â”‚ â”‚Spell Check   â”‚ â”‚
â”‚ â”‚Token Mgmt    â”‚ â”‚   â”‚ â”‚                  â”‚â”‚   â”‚ â”‚              â”‚ â”‚
â”‚ â”‚              â”‚ â”‚   â”‚ â”‚Scrabble Scoring  â”‚â”‚   â”‚ â”‚Suggestions   â”‚ â”‚
â”‚ â”‚User Retrievalâ”‚ â”‚   â”‚ â”‚                  â”‚â”‚   â”‚ â”‚              â”‚ â”‚
â”‚ â”‚              â”‚ â”‚   â”‚ â”‚Round Management  â”‚â”‚   â”‚ â”‚13,000+ words â”‚ â”‚
â”‚ â”‚Session Store â”‚ â”‚   â”‚ â”‚                  â”‚â”‚   â”‚ â”‚              â”‚ â”‚
â”‚ â”‚              â”‚ â”‚   â”‚ â”‚Game State Mgmt   â”‚â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚                  â”‚â”‚   â”‚                  â”‚
â”‚                  â”‚   â”‚ â”‚Winner Detection  â”‚â”‚   â”‚ In-Memory Store  â”‚
â”‚ In-Memory Store  â”‚   â”‚ â”‚                  â”‚â”‚   â”‚                  â”‚
â”‚                  â”‚   â”‚ â”‚Draw Detection    â”‚â”‚   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                      â”‚
                       â”‚   In-Memory Store    â”‚
                       â”‚                      â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### 1. Player Submits Word

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT  â”‚
â”‚ (CLI/   â”‚
â”‚  Web)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. WebSocket Message
     â”‚    { type: "circle_submit_word",
     â”‚      payload: { roomId, word: "STREAM" } }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚
â”‚  (Port 3004)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. HTTP POST
     â”‚    /circle/:roomId/word
     â”‚    { userId, word: "STREAM" }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GAME RULES       â”‚
â”‚ SERVICE          â”‚
â”‚ (Port 3003)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. HTTP POST
     â”‚    /validate
     â”‚    { word: "STREAM" }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DICTIONARY       â”‚
â”‚ SERVICE          â”‚  4. Response: { valid: true }
â”‚ (Port 3002)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Validate adjacency
     â”‚    Calculate score: 8 points
     â”‚    Update game state
     â”‚
     â”‚ 6. Response
     â”‚    { isValid: true, score: 8, gameState: {...} }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚  7. Broadcast to all players
â”‚                 â”‚     in room via WebSocket
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 8. WebSocket Broadcast
     â”‚    { type: "circle_word_submitted",
     â”‚      payload: { userId, word, score, gameState } }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚CLIENT 1 â”‚  â”‚CLIENT 2 â”‚
â”‚         â”‚  â”‚         â”‚
â”‚Updates  â”‚  â”‚Updates  â”‚
â”‚UI with  â”‚  â”‚UI with  â”‚
â”‚new scoreâ”‚  â”‚new scoreâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Game Start Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HOST    â”‚
â”‚ CLIENT  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. circle_start_game
     â”‚    { roomId, playerIds: ["usr1", "usr2"] }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. GET /users/usr1
     â”‚    GET /users/usr2
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER SERVICE    â”‚  3. Return player info
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. POST /circle/:roomId/start
     â”‚    { playerIds, usernames }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GAME RULES       â”‚
â”‚                  â”‚  5. Generate 9 circle letters
â”‚                  â”‚     Balance vowels/consonants
â”‚                  â”‚     Initialize game state
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Response
     â”‚    { gameState: {
     â”‚        circleLetters: [T,E,A,R,S,O,M,L,P],
     â”‚        roundNumber: 1,
     â”‚        players: {...}
     â”‚    }}
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚  7. Broadcast to room
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 8. circle_game_started
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚CLIENT 1 â”‚      â”‚CLIENT 2 â”‚      â”‚SPECTATORâ”‚
â”‚         â”‚      â”‚         â”‚      â”‚         â”‚
â”‚Show     â”‚      â”‚Show     â”‚      â”‚Show     â”‚
â”‚circle   â”‚      â”‚circle   â”‚      â”‚circle   â”‚
â”‚Start 60sâ”‚      â”‚Start 60sâ”‚      â”‚View     â”‚
â”‚timer    â”‚      â”‚timer    â”‚      â”‚game     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Round End Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TIMER   â”‚
â”‚ EXPIRES â”‚  (60 seconds)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. circle_end_round
     â”‚    { roomId }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. POST /circle/:roomId/end-round
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GAME RULES       â”‚
â”‚                  â”‚  3. Compare scores
â”‚                  â”‚     Determine round winner
â”‚                  â”‚     Increment roundsWon
â”‚                  â”‚     Check if game over (3 rounds)
â”‚                  â”‚     Generate new circle if continuing
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Response
     â”‚    { roundWinner, scores, gameState }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROOM SERVICE   â”‚  5. Broadcast results
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€ If round < 3:
     â”‚  circle_round_ended { roundWinner, scores, nextRound }
     â”‚
     â””â”€ If round = 3:
        circle_game_over { gameWinner, finalScores, isDraw }
        
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚CLIENT 1 â”‚  â”‚CLIENT 2 â”‚
â”‚         â”‚  â”‚         â”‚
â”‚Show     â”‚  â”‚Show     â”‚
â”‚results  â”‚  â”‚results  â”‚
â”‚modal    â”‚  â”‚modal    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TECHNOLOGY STACK                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLI CLIENT    â”‚  â”‚   WEB CLIENT    â”‚  â”‚ MOBILE CLIENT   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Node.js 18+   â”‚  â”‚ â€¢ React 18      â”‚  â”‚ â€¢ Capacitor 5   â”‚
â”‚ â€¢ TypeScript 5  â”‚  â”‚ â€¢ TypeScript 5  â”‚  â”‚ â€¢ React 18      â”‚
â”‚ â€¢ WebSocket (ws)â”‚  â”‚ â€¢ Vite 4        â”‚  â”‚ â€¢ Same as Web   â”‚
â”‚ â€¢ readline-sync â”‚  â”‚ â€¢ Native WS API â”‚  â”‚ â€¢ Native Pluginsâ”‚
â”‚ â€¢ chalk         â”‚  â”‚ â€¢ Lucide Icons  â”‚  â”‚ â€¢ iOS/Android   â”‚
â”‚ â€¢ axios         â”‚  â”‚ â€¢ CSS3          â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BACKEND SERVICES (All use same stack):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Runtime:      Node.js 18+                                 â”‚
â”‚ â€¢ Language:     TypeScript 5.x                              â”‚
â”‚ â€¢ HTTP:         Express.js 4.x                              â”‚
â”‚ â€¢ WebSocket:    ws 8.x (Room Service only)                  â”‚
â”‚ â€¢ HTTP Client:  axios                                       â”‚
â”‚ â€¢ Storage:      In-Memory (Map, Set)                        â”‚
â”‚ â€¢ Build:        tsc (TypeScript Compiler)                   â”‚
â”‚ â€¢ Dev:          nodemon (auto-reload)                       â”‚
â”‚ â€¢ Testing:      Jest + ts-jest                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROTOCOLS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ WebSocket:    Real-time client â†” Room Service             â”‚
â”‚ â€¢ HTTP REST:    Service-to-service communication            â”‚
â”‚ â€¢ JSON:         Message serialization                        â”‚
â”‚ â€¢ Bearer Token: Authentication                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Service Responsibilities

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SERVICE RESPONSIBILITIES                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER SERVICE (Port 3001)
â”œâ”€ POST /users/register
â”œâ”€ POST /users/login
â”œâ”€ GET  /users/:userId
â”œâ”€ GET  /health
â””â”€ Data: In-memory Map<userId, User>, Map<token, Session>

DICTIONARY SERVICE (Port 3002)
â”œâ”€ POST /validate
â”œâ”€ POST /validate/batch
â”œâ”€ POST /suggestions
â”œâ”€ GET  /words
â”œâ”€ GET  /health
â””â”€ Data: Set<string> with 13,000+ words

GAME RULES SERVICE (Port 3003)
â”œâ”€ POST /circle/:roomId/start
â”œâ”€ POST /circle/:roomId/word
â”œâ”€ POST /circle/:roomId/end-round
â”œâ”€ GET  /circle/:roomId
â”œâ”€ GET  /health
â””â”€ Data: Map<roomId, CircleGameState>

ROOM SERVICE (Port 3004)
â”œâ”€ HTTP Endpoints:
â”‚  â”œâ”€ GET  /rooms
â”‚  â”œâ”€ POST /rooms
â”‚  â”œâ”€ GET  /health
â”‚  â””â”€ GET  /stats
â”‚
â”œâ”€ WebSocket Messages (Client â†’ Server):
â”‚  â”œâ”€ auth
â”‚  â”œâ”€ create_room
â”‚  â”œâ”€ join_room
â”‚  â”œâ”€ leave_room
â”‚  â”œâ”€ circle_start_game
â”‚  â”œâ”€ circle_submit_word
â”‚  â”œâ”€ circle_end_round
â”‚  â”œâ”€ chat_message
â”‚  â””â”€ ping
â”‚
â”œâ”€ WebSocket Messages (Server â†’ Client):
â”‚  â”œâ”€ auth_success
â”‚  â”œâ”€ room_created
â”‚  â”œâ”€ room_updated
â”‚  â”œâ”€ player_joined
â”‚  â”œâ”€ player_left
â”‚  â”œâ”€ circle_game_started
â”‚  â”œâ”€ circle_word_submitted
â”‚  â”œâ”€ circle_round_ended
â”‚  â”œâ”€ circle_game_over
â”‚  â”œâ”€ chat_broadcast
â”‚  â”œâ”€ error
â”‚  â””â”€ pong
â”‚
â””â”€ Data: Map<roomId, Room>, Map<ws, ClientInfo>
```

---

## Deployment View (Future Production)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PRODUCTION ARCHITECTURE                     â”‚
â”‚                    (Future Enhancement)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOAD BALANCER (NGINX)
    â”‚
    â”œâ”€â”€ SSL/TLS Termination
    â”œâ”€â”€ WebSocket Upgrade
    â””â”€â”€ Sticky Sessions
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ROOM SERVICE (Multiple)      â”‚
â”‚   Container 1, 2, 3...         â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ Redis (Shared State)
    â”‚   â””â”€â”€ Pub/Sub for room updates
    â”‚
    â””â”€â”€ Service Discovery
        â”‚
        â”œâ”€â”€ User Service (Scaled)
        â”œâ”€â”€ Dictionary Service (Scaled)
        â””â”€â”€ Game Rules Service (Scaled)
            â”‚
            â””â”€â”€ PostgreSQL (Persistent Data)
                â”œâ”€â”€ Users
                â”œâ”€â”€ Game History
                â””â”€â”€ Statistics

KUBERNETES DEPLOYMENT:
- Each service: Separate deployment
- Auto-scaling: Based on CPU/Memory
- Health checks: Liveness/Readiness probes
- Service mesh: Istio (optional)
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT
  â”‚
  â””â”€ 1. HTTPS/WSS (Production)
     â”‚
     â–¼
ROOM SERVICE (Gateway)
  â”‚
  â”œâ”€ 2. Bearer Token Validation
  â”‚     â””â”€ Verify with User Service
  â”‚
  â”œâ”€ 3. Rate Limiting (per IP/user)
  â”‚     â””â”€ Prevent spam/DoS
  â”‚
  â””â”€ 4. Input Validation
        â””â”€ Sanitize all inputs
        â”‚
        â–¼
GAME RULES SERVICE
  â”‚
  â”œâ”€ 5. Server-Authoritative Logic
  â”‚     â””â”€ All validation server-side
  â”‚
  â”œâ”€ 6. Anti-Cheat Checks
  â”‚     â”œâ”€ Validate word from circle
  â”‚     â”œâ”€ Check adjacency
  â”‚     â””â”€ Prevent duplicate submissions
  â”‚
  â””â”€ 7. Timer Validation
        â””â”€ Server controls timing
        â”‚
        â–¼
DICTIONARY SERVICE
  â”‚
  â””â”€ 8. Word Validation
        â””â”€ Trusted word list
```

This architecture diagram document is ready for your presentation! ğŸ“
